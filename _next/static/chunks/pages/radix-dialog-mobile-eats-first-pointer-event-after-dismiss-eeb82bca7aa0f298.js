(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{1641:function(t,e,i){"use strict";i.d(e,{Vq:function(){return m},cZ:function(){return w},hg:function(){return R}});var n=i(9499),o=i(4730),s=i(7294),r=i(5002),a=(0,i(6744).Th)({theme:{colors:{none:"#00000000",primary:"#000000",transparent:"#00000000"},fontSizes:{},fonts:{},lineHeights:{},letterSpacings:{},sizes:{},space:{dialogPadding:"24px",iconLength:"16px",innerPaddingX:"20px",mobilePadding:"21px",contentWidthDesktop:"704px",contentWidthMid:"796px",contentWidthFull:"888px"},borderWidths:{},borderStyles:{},radii:{},shadows:{},zIndices:{},transitions:{}},media:{desktop:"(min-width: 744px)",mid:"(min-width: 936px)",full:"(min-width: 1128px)"},utils:{marginX:function(t){return{marginLeft:t,marginRight:t}},marginY:function(t){return{marginTop:t,marginBottom:t}},paddingX:function(t){return{paddingLeft:t,paddingRight:t}},paddingY:function(t){return{paddingTop:t,paddingBottom:t}},size:function(t){return{width:t,height:t}}}}),l=(a.config,a.createTheme,a.css,a.getCssText,a.globalCss,a.keyframes),d=a.styled,c=(a.theme,i(5893)),h=["children"],g=["children"];function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){(0,n.Z)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t){var e=t.children,i=(0,o.Z)(t,h);return(0,c.jsxs)(x,f(f({},i),{},{children:[(0,c.jsx)(j,{}),e]}))}var x=d(r.fC,{}),u=l({from:{opacity:"0"},to:{opacity:"1"}}),b=l({from:{opacity:"1"},to:{opacity:"0"}}),j=d(r.aV,{backgroundColor:"rgba(0, 0, 0, 0.5)",bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:"1000",'&[data-state="open"]':{animation:"".concat(u," 500ms cubic-bezier(0.22, 1, 0.36, 1)")},'&[data-state="closed"]':{animation:"".concat(b," 500ms cubic-bezier(0.22, 1, 0.36, 1)")}}),w=s.forwardRef((function(t,e){var i=t.children,n=(0,o.Z)(t,g);return(0,c.jsxs)(P,f(f({},n),{},{ref:e,children:[(0,c.jsx)(O,{children:(0,c.jsx)(z,{"aria-label":"close",asChild:!0,children:(0,c.jsx)("button",{type:"button",children:"Dismiss"})})}),(0,c.jsx)(T,{children:i})]}))}));w.displayName="DialogContent";var y=l({from:{transform:"translate3d(0%,100%,0)"},to:{transform:"translate3d(0%,0%,0)"}}),v=l({from:{transform:"translate3d(0%,0%,0)"},to:{transform:"translate3d(0%,100%,0)"}}),D=l({from:{transform:"translate3d(-50%,50%,0)"},to:{transform:"translate3d(-50%,-50%,0)"}}),C=l({from:{transform:"translate3d(-50%,-50%,0)"},to:{transform:"translate3d(-50%,50%,0)"}}),P=d(r.VY,{backgroundColor:"#ffffff",borderRadius:"0px",boxShadow:"hsl(187 22% 7% / 35%) 0px 10px 38px -10px,hsl(187 22% 7% / 20%) 0px 10px 20px -15px",height:"100vh",left:"0%",maxWidth:"100vw",minWidth:"200px",position:"fixed",top:"0%",width:"100%",willChange:"transform",zIndex:"1001","&:focus":{outline:"none"},'&[data-state="open"]':{animation:"".concat(y," 500ms cubic-bezier(0.22, 1, 0.36, 1),")+"".concat(u," 500ms cubic-bezier(0.22, 1, 0.36, 1)")},'&[data-state="closed"]':{animation:"".concat(v," 500ms cubic-bezier(0.22, 1, 0.36, 1),")+"".concat(b," 300ms cubic-bezier(0.22, 1, 0.36, 1)")},"@desktop":{borderRadius:"12px",height:"auto",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"85vw",width:"75%",'&[data-state="open"]':{animation:"".concat(D," 500ms cubic-bezier(0.22, 1, 0.36, 1),")+"".concat(u," 500ms cubic-bezier(0.22, 1, 0.36, 1)")},'&[data-state="closed"]':{animation:"".concat(C," 500ms cubic-bezier(0.22, 1, 0.36, 1),")+"".concat(b," 300ms cubic-bezier(0.22, 1, 0.36, 1)")}}}),O=d("div",{height:"24px",padding:"$dialogPadding",position:"relative",width:"auto"}),T=d("div",{$$headerHeight:"calc($space$iconLength + ($space$dialogPadding * 2))",maxHeight:"calc(100vh - $$headerHeight)",overflow:"scroll",paddingBottom:"$dialogPadding",paddingX:"$space$dialogPadding",position:"relative",width:"auto","@desktop":{maxHeight:"calc(85vh - $$headerHeight)"}}),z=d(r.x8,{position:"relative"}),R=(r.x8,r.dk,r.Dx,r.xz)},897:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return d}});i(7294);var n=i(5002),o=i(9008),s=i(1664),r=i(1452),a=i(1641),l=i(5893);function d(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.default,{children:[(0,l.jsx)("title",{children:"Issue: Radix Dialog on Mobile eats first pointer event after dismiss"}),(0,l.jsx)("meta",{name:"description",content:"Issue: Radix Dialog on Mobile eats first pointer event after dismiss"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(s.default,{href:"/",as:"".concat("/minimal-repros","/"),children:(0,l.jsx)("a",{children:"Back to Home"})}),(0,l.jsx)("h2",{children:"Issue: Radix Dialog on Mobile eats first pointer event after dismiss"}),(0,l.jsxs)("ol",{children:[(0,l.jsxs)("li",{children:["View the source code for this page\xa0",(0,l.jsx)("a",{href:"https://github.com/just-learning-1/minimal-repros/blob/master/src/pages/radix-dialog-mobile-eats-first-pointer-event-after-dismiss.page.jsx",children:"here"})]}),(0,l.jsx)("li",{children:"Open this page in a mobile browser or in Firefox with Touch Emulation enabled"}),(0,l.jsx)("li",{children:"Tap the following button to open the Radix UI Dialog:"}),(0,l.jsx)("li",{children:(0,l.jsxs)(a.Vq,{children:[(0,l.jsx)(a.hg,{asChild:!0,children:(0,l.jsx)("button",{type:"button",children:"#1: First tap after dismiss is eaten"})}),(0,l.jsx)(a.cZ,{children:"Now dismiss this dialog, then try tapping the earlier button again"})]})}),(0,l.jsx)("li",{children:"After dismissing the dialog, try tapping the same (or a different) button again"}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Result: "}),"The first tap after dismissing the dialog is stolen!"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Investigation: "}),"I discovered the following is still set on the body tag after dismiss until the next tap is received:",(0,l.jsx)("br",{}),(0,l.jsx)("code",{children:'<body style="pointer-events: none;">'})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"However! "}),"If I change the implementation of",(0,l.jsx)("strong",{children:" DialogContent "}),"from this:"]}),(0,l.jsx)("li",{children:(0,l.jsx)(r.Z,{language:"javascript",children:'// from this page\n<Dialog>\n  <DialogTrigger asChild>\n    <button type="button">\n      Tap Me, then Tap Me Again after dismissing the dialog\n    </button>\n  </DialogTrigger>\n  <DialogContent>\n    Now dismiss this dialog, then try tapping the earlier button again\n  </DialogContent>\n</Dialog>\n\n// from Dialog.jsx\nexport const DialogContent = React.forwardRef(({ children, ...props }, forwardedRef) => (\n  <DialogContentContainer {...props} ref={forwardedRef}>\n    <DialogHeaderBar>\n      <CloseButton aria-label="close" asChild>\n        <button type="button">\n          Dismiss\n        </button>\n      </CloseButton>\n    </DialogHeaderBar>\n    <DialogContentBody>\n      {children}\n    </DialogContentBody>\n  </DialogContentContainer>\n))'})}),(0,l.jsx)("li",{children:"To this:"}),(0,l.jsx)("li",{children:(0,l.jsx)(r.Z,{language:"javascript",children:'// from this page\n<Dialog>\n  <DialogTrigger asChild>\n    <button type="button">\n      Here is a second button whose pointer event also gets eaten\n    </button>\n  </DialogTrigger>\n  <DialogPrimitive.Content style={{ /* ... */ }}>\n    <DialogPrimitive.Close asChild>\n      <button type="button">Dismiss</button>\n    </DialogPrimitive.Close>\n    Now dismiss this dialog, then try tapping the earlier button again\n    </DialogPrimitive.Content>\n</Dialog>'})}),(0,l.jsxs)("li",{children:["Like so:",(0,l.jsx)("br",{}),(0,l.jsxs)(a.Vq,{children:[(0,l.jsx)(a.hg,{asChild:!0,children:(0,l.jsx)("button",{type:"button",children:"#2: Stolen tap is fixed! But I do not understand why"})}),(0,l.jsxs)(n.VY,{style:{backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"hsl(187 22% 7% / 35%) 0px 10px 38px -10px,hsl(187 22% 7% / 20%) 0px 10px 20px -15px",height:"auto",left:"50%",padding:"24px",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"85vw",width:"75%",zIndex:"101"},children:[(0,l.jsx)(n.x8,{asChild:!0,children:(0,l.jsx)("button",{type:"button",display:"block",children:"Dismiss"})}),(0,l.jsx)("div",{children:"Now dismiss this dialog, then try tapping the earlier button again"})]})]})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"The problem goes away! "}),"The first tap after dismiss is not invalidated."]}),(0,l.jsxs)("li",{children:["Only difference is the second version swaps a",(0,l.jsx)("code",{children:" React.forwardRef "}),"styled version of the Dialog Content element with the",(0,l.jsx)("code",{children:" DialogPrimitive.Content "}),"element directly"]}),(0,l.jsxs)("li",{children:["The curious thing is, the implementation of the first dialog is modeled almost identically to the",(0,l.jsx)("strong",{children:" Radix UI Design System Dialog. "}),"Compare the two Dialog implementations:",(0,l.jsxs)("ol",{children:[(0,l.jsx)("ol",{children:(0,l.jsx)("a",{href:"https://github.com/radix-ui/design-system/blob/master/components/Dialog.tsx",children:"radix-ui/design-system/.../Dialog.tsx"})}),(0,l.jsx)("ol",{children:(0,l.jsx)("a",{href:"https://github.com/just-learning-1/minimal-repros/blob/master/src/base/Dialog.jsx",children:"just-learning-1/minimal-repros/.../Dialog.jsx"})})]})]}),(0,l.jsx)("li",{children:"I am new to coding, and I cannot for the life of me figure out why this is happening :("})]})]})]})}},505:function(t,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/radix-dialog-mobile-eats-first-pointer-event-after-dismiss",function(){return i(897)}])}},function(t){t.O(0,[774,783,452,888,179],(function(){return e=505,t(t.s=e);var e}));var e=t.O();_N_E=e}]);